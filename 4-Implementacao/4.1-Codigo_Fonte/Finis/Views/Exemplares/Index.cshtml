@model IEnumerable<Finis.Models.Exemplar>

<script type="text/javascript">

    function deletaRegistro(id) {

        $.ajax({
                 type: "GET",
                 url: "@Url.Action("DeletarRegistro", "Exemplares")",
                 data: { id: id },
                 dataType: "json",
                 success: function (dados) {
                     location.reload();
                 }
             });
    }

</script>

<div class="fixed-action-btn">
    <a class="btn-floating btn-large red" href="@Url.Action("Form","Exemplares")">
        <i class="material-icons">add</i>
    </a>
</div>
<table class="highlight">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.titulo)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.editora.nome)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.edicao)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.conservacao)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.quantidade)
            </th>
            <th>Opções</th>
        </tr>
    </thead>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayNameFor(model => model.titulo)
        </td>
        <td>
            @Html.DisplayNameFor(model => model.editora.nome)
        </td>
        <td>
           @Html.DisplayNameFor(model => model.edicao)
        </td>
        <td>
           @Html.DisplayNameFor(model => model.conservacao)
        </td>
        <td>
           @Html.DisplayNameFor(model => model.quantidade)
        </td>
        <td>
            <a class="btn-floating blue" href="@Url.Action("Edit", "Exemplares", new { id = @item.id })"><i class="material-icons">mode_edit</i></a>
            @Html.ActionLink("Details", "Details", new { id=item.id }) |
            <a class="btn-floating red" onclick="showModal(@item.id, 'md1'); return false;"><i class="material-icons">delete</i></a>
        </td>
    </tr>
}
</table>

<div id="md1" class="modal">
    <div class="modal-content">
        <h4>Confirmação</h4>
        <p>Tem certeza que deseja remover este exemplar?</p>
    </div>
    <div class="modal-footer">
        <a href="#" class="waves-effect waves-red btn-flat" onclick="$('#md1').closeModal(); return false;">Cancelar</a>
        <a href="#" class="waves-effect waves-green btn-flat" id="md1_YesBtn">Confirmar</a>
    </div>
</div>

@section scripts{
    <script type="text/javascript">

        function showModal(id, modal) {
            $('#' + modal).openModal();
            $('#' + modal + '_YesBtn').click(function () { $('#' + modal).closeModal(); deletaRegistro(id); });
        }

        $(document).ready(function () {

            //$('.modal-trigger').leanModal();
        });

    </script>
}
